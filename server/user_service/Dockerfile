FROM node:18.16

WORKDIR /usr/src/user-server
COPY package.json yarn.lock ./
RUN yarn install
COPY . .
ARG ACCESS_TOKEN_SECRET
ENV ACCESS_TOKEN_SECRET=$ACCESS_TOKEN_SECRET
ARG REFRESH_TOKEN_SECRET
ENV REFRESH_TOKEN_SECRET=$REFRESH_TOKEN_SECRET
EXPOSE 5001
CMD ["yarn", "server"]